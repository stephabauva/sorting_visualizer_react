{"ast":null,"code":"var c = document.getElementsByClassName(\"App\");\nvar ctx = c.getContext(\"2d\");\nvar cH;\nvar cW;\nvar bgColor = \"#FF6138\";\nvar animations = [];\nvar circles = [];\n\nvar colorPicker = function () {\n  var colors = [\"#FF6138\", \"#FFBE53\", \"#2980B9\", \"#282741\"];\n  var index = 0;\n\n  function next() {\n    index = index++ < colors.length - 1 ? index : 0;\n    return colors[index];\n  }\n\n  function current() {\n    return colors[index];\n  }\n\n  return {\n    next: next,\n    current: current\n  };\n}();\n\nfunction explosiveClick() {\n  function removeAnimation(animation) {\n    var index = animations.indexOf(animation);\n    if (index > -1) animations.splice(index, 1);\n  }\n\n  function calcPageFillRadius(x, y) {\n    var l = Math.max(x - 0, cW - x);\n    var h = Math.max(y - 0, cH - y);\n    return Math.sqrt(Math.pow(l, 2) + Math.pow(h, 2));\n  }\n\n  function addClickListeners() {\n    document.addEventListener(\"touchstart\", handleEvent);\n    document.addEventListener(\"mousedown\", handleEvent);\n  }\n\n  ;\n\n  function handleEvent(e) {\n    if (e.touches) {\n      e.preventDefault();\n      e = e.touches[0];\n    }\n\n    var currentColor = colorPicker.current();\n    var nextColor = colorPicker.next();\n    var targetR = calcPageFillRadius(e.pageX, e.pageY);\n    var rippleSize = Math.min(200, cW * .4);\n    var minCoverDuration = 750;\n    var pageFill = new Circle({\n      x: e.pageX,\n      y: e.pageY,\n      r: 0,\n      fill: nextColor\n    });\n    var fillAnimation = anime({\n      targets: pageFill,\n      r: targetR,\n      duration: Math.max(targetR / 2, minCoverDuration),\n      easing: \"easeOutQuart\",\n      complete: function () {\n        bgColor = pageFill.fill;\n        removeAnimation(fillAnimation);\n      }\n    });\n    var ripple = new Circle({\n      x: e.pageX,\n      y: e.pageY,\n      r: 0,\n      fill: currentColor,\n      stroke: {\n        width: 3,\n        color: currentColor\n      },\n      opacity: 1\n    });\n    var rippleAnimation = anime({\n      targets: ripple,\n      r: rippleSize,\n      opacity: 0,\n      easing: \"easeOutExpo\",\n      duration: 900,\n      complete: removeAnimation\n    });\n    var particles = [];\n\n    for (var i = 0; i < 32; i++) {\n      var particle = new Circle({\n        x: e.pageX,\n        y: e.pageY,\n        fill: currentColor,\n        r: anime.random(24, 48)\n      });\n      particles.push(particle);\n    }\n\n    var particlesAnimation = anime({\n      targets: particles,\n      x: function (particle) {\n        return particle.x + anime.random(rippleSize, -rippleSize);\n      },\n      y: function (particle) {\n        return particle.y + anime.random(rippleSize * 1.15, -rippleSize * 1.15);\n      },\n      r: 0,\n      easing: \"easeOutExpo\",\n      duration: anime.random(1000, 1300),\n      complete: removeAnimation\n    });\n    animations.push(fillAnimation, rippleAnimation, particlesAnimation);\n  }\n\n  function extend(a, b) {\n    for (var key in b) {\n      if (b.hasOwnProperty(key)) {\n        a[key] = b[key];\n      }\n    }\n\n    return a;\n  }\n\n  var Circle = function (opts) {\n    extend(this, opts);\n  };\n\n  Circle.prototype.draw = function () {\n    ctx.globalAlpha = this.opacity || 1;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI, false);\n\n    if (this.stroke) {\n      ctx.strokeStyle = this.stroke.color;\n      ctx.lineWidth = this.stroke.width;\n      ctx.stroke();\n    }\n\n    if (this.fill) {\n      ctx.fillStyle = this.fill;\n      ctx.fill();\n    }\n\n    ctx.closePath();\n    ctx.globalAlpha = 1;\n  };\n\n  var animate = anime({\n    duration: Infinity,\n    update: function () {\n      ctx.fillStyle = bgColor;\n      ctx.fillRect(0, 0, cW, cH);\n      animations.forEach(function (anim) {\n        anim.animatables.forEach(function (animatable) {\n          animatable.target.draw();\n        });\n      });\n    }\n  });\n\n  var resizeCanvas = function () {\n    cW = window.innerWidth;\n    cH = window.innerHeight;\n    c.width = cW * devicePixelRatio;\n    c.height = cH * devicePixelRatio;\n    ctx.scale(devicePixelRatio, devicePixelRatio);\n  };\n\n  (function init() {\n    resizeCanvas();\n\n    if (window.CP) {\n      // CodePen's loop detection was causin' problems\n      // and I have no idea why, so...\n      window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT = 6000;\n    }\n\n    window.addEventListener(\"resize\", resizeCanvas);\n    addClickListeners();\n\n    if (!!window.location.pathname.match(/fullcpgrid/)) {\n      startFauxClicking();\n    }\n\n    handleInactiveUser();\n  })();\n\n  function handleInactiveUser() {\n    var inactive = setTimeout(function () {\n      fauxClick(cW / 2, cH / 2);\n    }, 2000);\n\n    function clearInactiveTimeout() {\n      clearTimeout(inactive);\n      document.removeEventListener(\"mousedown\", clearInactiveTimeout);\n      document.removeEventListener(\"touchstart\", clearInactiveTimeout);\n    }\n\n    document.addEventListener(\"mousedown\", clearInactiveTimeout);\n    document.addEventListener(\"touchstart\", clearInactiveTimeout);\n  }\n\n  function startFauxClicking() {\n    setTimeout(function () {\n      fauxClick(anime.random(cW * .2, cW * .8), anime.random(cH * .2, cH * .8));\n      startFauxClicking();\n    }, anime.random(200, 900));\n  }\n\n  function fauxClick(x, y) {\n    var fauxClick = new Event(\"mousedown\");\n    fauxClick.pageX = x;\n    fauxClick.pageY = y;\n    document.dispatchEvent(fauxClick);\n  }\n}\n\nexport default explosiveClick;","map":{"version":3,"sources":["/Users/urdoom/sorting_visualizer_react/src/background.js"],"names":["c","document","getElementsByClassName","ctx","getContext","cH","cW","bgColor","animations","circles","colorPicker","colors","index","next","length","current","explosiveClick","removeAnimation","animation","indexOf","splice","calcPageFillRadius","x","y","l","Math","max","h","sqrt","pow","addClickListeners","addEventListener","handleEvent","e","touches","preventDefault","currentColor","nextColor","targetR","pageX","pageY","rippleSize","min","minCoverDuration","pageFill","Circle","r","fill","fillAnimation","anime","targets","duration","easing","complete","ripple","stroke","width","color","opacity","rippleAnimation","particles","i","particle","random","push","particlesAnimation","extend","a","b","key","hasOwnProperty","opts","prototype","draw","globalAlpha","beginPath","arc","PI","strokeStyle","lineWidth","fillStyle","closePath","animate","Infinity","update","fillRect","forEach","anim","animatables","animatable","target","resizeCanvas","window","innerWidth","innerHeight","devicePixelRatio","height","scale","init","CP","PenTimer","MAX_TIME_IN_LOOP_WO_EXIT","location","pathname","match","startFauxClicking","handleInactiveUser","inactive","setTimeout","fauxClick","clearInactiveTimeout","clearTimeout","removeEventListener","Event","dispatchEvent"],"mappings":"AAAA,IAAIA,CAAC,GAAGC,QAAQ,CAACC,sBAAT,CAAgC,KAAhC,CAAR;AACI,IAAIC,GAAG,GAAGH,CAAC,CAACI,UAAF,CAAa,IAAb,CAAV;AACA,IAAIC,EAAJ;AACA,IAAIC,EAAJ;AACA,IAAIC,OAAO,GAAG,SAAd;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,IAAIC,OAAO,GAAG,EAAd;;AAEA,IAAIC,WAAW,GAAI,YAAW;AAC9B,MAAIC,MAAM,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,CAAb;AACA,MAAIC,KAAK,GAAG,CAAZ;;AACA,WAASC,IAAT,GAAgB;AACZD,IAAAA,KAAK,GAAGA,KAAK,KAAKD,MAAM,CAACG,MAAP,GAAc,CAAxB,GAA4BF,KAA5B,GAAoC,CAA5C;AACA,WAAOD,MAAM,CAACC,KAAD,CAAb;AACH;;AACD,WAASG,OAAT,GAAmB;AACf,WAAOJ,MAAM,CAACC,KAAD,CAAb;AACH;;AACD,SAAO;AACHC,IAAAA,IAAI,EAAEA,IADH;AAEHE,IAAAA,OAAO,EAAEA;AAFN,GAAP;AAIC,CAdiB,EAAlB;;AAgBJ,SAASC,cAAT,GAAyB;AAGrB,WAASC,eAAT,CAAyBC,SAAzB,EAAoC;AACpC,QAAIN,KAAK,GAAGJ,UAAU,CAACW,OAAX,CAAmBD,SAAnB,CAAZ;AACA,QAAIN,KAAK,GAAG,CAAC,CAAb,EAAgBJ,UAAU,CAACY,MAAX,CAAkBR,KAAlB,EAAyB,CAAzB;AACf;;AAED,WAASS,kBAAT,CAA4BC,CAA5B,EAA+BC,CAA/B,EAAkC;AAClC,QAAIC,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASJ,CAAC,GAAG,CAAb,EAAgBhB,EAAE,GAAGgB,CAArB,CAAR;AACA,QAAIK,CAAC,GAAGF,IAAI,CAACC,GAAL,CAASH,CAAC,GAAG,CAAb,EAAgBlB,EAAE,GAAGkB,CAArB,CAAR;AACA,WAAOE,IAAI,CAACG,IAAL,CAAUH,IAAI,CAACI,GAAL,CAASL,CAAT,EAAY,CAAZ,IAAiBC,IAAI,CAACI,GAAL,CAASF,CAAT,EAAY,CAAZ,CAA3B,CAAP;AACC;;AAED,WAASG,iBAAT,GAA6B;AAC7B7B,IAAAA,QAAQ,CAAC8B,gBAAT,CAA0B,YAA1B,EAAwCC,WAAxC;AACA/B,IAAAA,QAAQ,CAAC8B,gBAAT,CAA0B,WAA1B,EAAuCC,WAAvC;AACC;;AAAA;;AAED,WAASA,WAAT,CAAqBC,CAArB,EAAwB;AACpB,QAAIA,CAAC,CAACC,OAAN,EAAe;AACfD,MAAAA,CAAC,CAACE,cAAF;AACAF,MAAAA,CAAC,GAAGA,CAAC,CAACC,OAAF,CAAU,CAAV,CAAJ;AACC;;AACD,QAAIE,YAAY,GAAG1B,WAAW,CAACK,OAAZ,EAAnB;AACA,QAAIsB,SAAS,GAAG3B,WAAW,CAACG,IAAZ,EAAhB;AACA,QAAIyB,OAAO,GAAGjB,kBAAkB,CAACY,CAAC,CAACM,KAAH,EAAUN,CAAC,CAACO,KAAZ,CAAhC;AACA,QAAIC,UAAU,GAAGhB,IAAI,CAACiB,GAAL,CAAS,GAAT,EAAepC,EAAE,GAAG,EAApB,CAAjB;AACA,QAAIqC,gBAAgB,GAAG,GAAvB;AAEA,QAAIC,QAAQ,GAAG,IAAIC,MAAJ,CAAW;AAC1BvB,MAAAA,CAAC,EAAEW,CAAC,CAACM,KADqB;AAE1BhB,MAAAA,CAAC,EAAEU,CAAC,CAACO,KAFqB;AAG1BM,MAAAA,CAAC,EAAE,CAHuB;AAI1BC,MAAAA,IAAI,EAAEV;AAJoB,KAAX,CAAf;AAMA,QAAIW,aAAa,GAAGC,KAAK,CAAC;AAC1BC,MAAAA,OAAO,EAAEN,QADiB;AAE1BE,MAAAA,CAAC,EAAER,OAFuB;AAG1Ba,MAAAA,QAAQ,EAAG1B,IAAI,CAACC,GAAL,CAASY,OAAO,GAAG,CAAnB,EAAuBK,gBAAvB,CAHe;AAI1BS,MAAAA,MAAM,EAAE,cAJkB;AAK1BC,MAAAA,QAAQ,EAAE,YAAU;AAChB9C,QAAAA,OAAO,GAAGqC,QAAQ,CAACG,IAAnB;AACA9B,QAAAA,eAAe,CAAC+B,aAAD,CAAf;AACH;AARyB,KAAD,CAAzB;AAWA,QAAIM,MAAM,GAAG,IAAIT,MAAJ,CAAW;AACxBvB,MAAAA,CAAC,EAAEW,CAAC,CAACM,KADmB;AAExBhB,MAAAA,CAAC,EAAEU,CAAC,CAACO,KAFmB;AAGxBM,MAAAA,CAAC,EAAE,CAHqB;AAIxBC,MAAAA,IAAI,EAAEX,YAJkB;AAKxBmB,MAAAA,MAAM,EAAE;AACJC,QAAAA,KAAK,EAAE,CADH;AAEJC,QAAAA,KAAK,EAAErB;AAFH,OALgB;AASxBsB,MAAAA,OAAO,EAAE;AATe,KAAX,CAAb;AAWA,QAAIC,eAAe,GAAGV,KAAK,CAAC;AAC5BC,MAAAA,OAAO,EAAEI,MADmB;AAE5BR,MAAAA,CAAC,EAAEL,UAFyB;AAG5BiB,MAAAA,OAAO,EAAE,CAHmB;AAI5BN,MAAAA,MAAM,EAAE,aAJoB;AAK5BD,MAAAA,QAAQ,EAAE,GALkB;AAM5BE,MAAAA,QAAQ,EAAEpC;AANkB,KAAD,CAA3B;AASA,QAAI2C,SAAS,GAAG,EAAhB;;AACA,SAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC,EAAhB,EAAoBA,CAAC,EAArB,EAAyB;AACzB,UAAIC,QAAQ,GAAG,IAAIjB,MAAJ,CAAW;AACtBvB,QAAAA,CAAC,EAAEW,CAAC,CAACM,KADiB;AAEtBhB,QAAAA,CAAC,EAAEU,CAAC,CAACO,KAFiB;AAGtBO,QAAAA,IAAI,EAAEX,YAHgB;AAItBU,QAAAA,CAAC,EAAEG,KAAK,CAACc,MAAN,CAAa,EAAb,EAAiB,EAAjB;AAJmB,OAAX,CAAf;AAMAH,MAAAA,SAAS,CAACI,IAAV,CAAeF,QAAf;AACC;;AACD,QAAIG,kBAAkB,GAAGhB,KAAK,CAAC;AAC/BC,MAAAA,OAAO,EAAEU,SADsB;AAE/BtC,MAAAA,CAAC,EAAE,UAASwC,QAAT,EAAkB;AACjB,eAAOA,QAAQ,CAACxC,CAAT,GAAa2B,KAAK,CAACc,MAAN,CAAatB,UAAb,EAAyB,CAACA,UAA1B,CAApB;AACH,OAJ8B;AAK/BlB,MAAAA,CAAC,EAAE,UAASuC,QAAT,EAAkB;AACjB,eAAOA,QAAQ,CAACvC,CAAT,GAAa0B,KAAK,CAACc,MAAN,CAAatB,UAAU,GAAG,IAA1B,EAAgC,CAACA,UAAD,GAAc,IAA9C,CAApB;AACH,OAP8B;AAQ/BK,MAAAA,CAAC,EAAE,CAR4B;AAS/BM,MAAAA,MAAM,EAAE,aATuB;AAU/BD,MAAAA,QAAQ,EAAEF,KAAK,CAACc,MAAN,CAAa,IAAb,EAAkB,IAAlB,CAVqB;AAW/BV,MAAAA,QAAQ,EAAEpC;AAXqB,KAAD,CAA9B;AAaAT,IAAAA,UAAU,CAACwD,IAAX,CAAgBhB,aAAhB,EAA+BW,eAA/B,EAAgDM,kBAAhD;AACH;;AAED,WAASC,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAqB;AACrB,SAAI,IAAIC,GAAR,IAAeD,CAAf,EAAkB;AACd,UAAGA,CAAC,CAACE,cAAF,CAAiBD,GAAjB,CAAH,EAA0B;AAC1BF,QAAAA,CAAC,CAACE,GAAD,CAAD,GAASD,CAAC,CAACC,GAAD,CAAV;AACC;AACJ;;AACD,WAAOF,CAAP;AACC;;AAED,MAAItB,MAAM,GAAG,UAAS0B,IAAT,EAAe;AAC5BL,IAAAA,MAAM,CAAC,IAAD,EAAOK,IAAP,CAAN;AACC,GAFD;;AAIA1B,EAAAA,MAAM,CAAC2B,SAAP,CAAiBC,IAAjB,GAAwB,YAAW;AACnCtE,IAAAA,GAAG,CAACuE,WAAJ,GAAkB,KAAKhB,OAAL,IAAgB,CAAlC;AACAvD,IAAAA,GAAG,CAACwE,SAAJ;AACAxE,IAAAA,GAAG,CAACyE,GAAJ,CAAQ,KAAKtD,CAAb,EAAgB,KAAKC,CAArB,EAAwB,KAAKuB,CAA7B,EAAgC,CAAhC,EAAmC,IAAIrB,IAAI,CAACoD,EAA5C,EAAgD,KAAhD;;AACA,QAAI,KAAKtB,MAAT,EAAiB;AACbpD,MAAAA,GAAG,CAAC2E,WAAJ,GAAkB,KAAKvB,MAAL,CAAYE,KAA9B;AACAtD,MAAAA,GAAG,CAAC4E,SAAJ,GAAgB,KAAKxB,MAAL,CAAYC,KAA5B;AACArD,MAAAA,GAAG,CAACoD,MAAJ;AACH;;AACD,QAAI,KAAKR,IAAT,EAAe;AACX5C,MAAAA,GAAG,CAAC6E,SAAJ,GAAgB,KAAKjC,IAArB;AACA5C,MAAAA,GAAG,CAAC4C,IAAJ;AACH;;AACD5C,IAAAA,GAAG,CAAC8E,SAAJ;AACA9E,IAAAA,GAAG,CAACuE,WAAJ,GAAkB,CAAlB;AACC,GAfD;;AAiBA,MAAIQ,OAAO,GAAGjC,KAAK,CAAC;AACpBE,IAAAA,QAAQ,EAAEgC,QADU;AAEpBC,IAAAA,MAAM,EAAE,YAAW;AACfjF,MAAAA,GAAG,CAAC6E,SAAJ,GAAgBzE,OAAhB;AACAJ,MAAAA,GAAG,CAACkF,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB/E,EAAnB,EAAuBD,EAAvB;AACAG,MAAAA,UAAU,CAAC8E,OAAX,CAAmB,UAASC,IAAT,EAAe;AAClCA,QAAAA,IAAI,CAACC,WAAL,CAAiBF,OAAjB,CAAyB,UAASG,UAAT,EAAqB;AAC1CA,UAAAA,UAAU,CAACC,MAAX,CAAkBjB,IAAlB;AACH,SAFD;AAGC,OAJD;AAKH;AAVmB,GAAD,CAAnB;;AAaA,MAAIkB,YAAY,GAAG,YAAW;AAC9BrF,IAAAA,EAAE,GAAGsF,MAAM,CAACC,UAAZ;AACAxF,IAAAA,EAAE,GAAGuF,MAAM,CAACE,WAAZ;AACA9F,IAAAA,CAAC,CAACwD,KAAF,GAAUlD,EAAE,GAAGyF,gBAAf;AACA/F,IAAAA,CAAC,CAACgG,MAAF,GAAW3F,EAAE,GAAG0F,gBAAhB;AACA5F,IAAAA,GAAG,CAAC8F,KAAJ,CAAUF,gBAAV,EAA4BA,gBAA5B;AACC,GAND;;AAQA,GAAC,SAASG,IAAT,GAAgB;AACjBP,IAAAA,YAAY;;AACZ,QAAIC,MAAM,CAACO,EAAX,EAAe;AACX;AACA;AACAP,MAAAA,MAAM,CAACO,EAAP,CAAUC,QAAV,CAAmBC,wBAAnB,GAA8C,IAA9C;AACH;;AACDT,IAAAA,MAAM,CAAC7D,gBAAP,CAAwB,QAAxB,EAAkC4D,YAAlC;AACA7D,IAAAA,iBAAiB;;AACjB,QAAI,CAAC,CAAC8D,MAAM,CAACU,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,YAA/B,CAAN,EAAoD;AAChDC,MAAAA,iBAAiB;AACpB;;AACDC,IAAAA,kBAAkB;AACjB,GAbD;;AAeA,WAASA,kBAAT,GAA8B;AAC9B,QAAIC,QAAQ,GAAGC,UAAU,CAAC,YAAU;AAChCC,MAAAA,SAAS,CAACvG,EAAE,GAAC,CAAJ,EAAOD,EAAE,GAAC,CAAV,CAAT;AACH,KAFwB,EAEtB,IAFsB,CAAzB;;AAIA,aAASyG,oBAAT,GAAgC;AAC5BC,MAAAA,YAAY,CAACJ,QAAD,CAAZ;AACA1G,MAAAA,QAAQ,CAAC+G,mBAAT,CAA6B,WAA7B,EAA0CF,oBAA1C;AACA7G,MAAAA,QAAQ,CAAC+G,mBAAT,CAA6B,YAA7B,EAA2CF,oBAA3C;AACH;;AAED7G,IAAAA,QAAQ,CAAC8B,gBAAT,CAA0B,WAA1B,EAAuC+E,oBAAvC;AACA7G,IAAAA,QAAQ,CAAC8B,gBAAT,CAA0B,YAA1B,EAAwC+E,oBAAxC;AACC;;AAED,WAASL,iBAAT,GAA6B;AAC7BG,IAAAA,UAAU,CAAC,YAAU;AACjBC,MAAAA,SAAS,CAAC5D,KAAK,CAACc,MAAN,CAAczD,EAAE,GAAG,EAAnB,EAAuBA,EAAE,GAAG,EAA5B,CAAD,EAAkC2C,KAAK,CAACc,MAAN,CAAa1D,EAAE,GAAG,EAAlB,EAAsBA,EAAE,GAAG,EAA3B,CAAlC,CAAT;AACAoG,MAAAA,iBAAiB;AACpB,KAHS,EAGPxD,KAAK,CAACc,MAAN,CAAa,GAAb,EAAkB,GAAlB,CAHO,CAAV;AAIC;;AAED,WAAS8C,SAAT,CAAmBvF,CAAnB,EAAsBC,CAAtB,EAAyB;AACzB,QAAIsF,SAAS,GAAG,IAAII,KAAJ,CAAU,WAAV,CAAhB;AACAJ,IAAAA,SAAS,CAACtE,KAAV,GAAkBjB,CAAlB;AACAuF,IAAAA,SAAS,CAACrE,KAAV,GAAkBjB,CAAlB;AACAtB,IAAAA,QAAQ,CAACiH,aAAT,CAAuBL,SAAvB;AACC;AACA;;AAEJ,eAAgB7F,cAAhB","sourcesContent":["var c = document.getElementsByClassName(\"App\");\n    var ctx = c.getContext(\"2d\");\n    var cH;\n    var cW;\n    var bgColor = \"#FF6138\";\n    var animations = [];\n    var circles = [];\n\n    var colorPicker = (function() {\n    var colors = [\"#FF6138\", \"#FFBE53\", \"#2980B9\", \"#282741\"];\n    var index = 0;\n    function next() {\n        index = index++ < colors.length-1 ? index : 0;\n        return colors[index];\n    }\n    function current() {\n        return colors[index]\n    }\n    return {\n        next: next,\n        current: current\n    }\n    })();\n\nfunction explosiveClick(){\n    \n\n    function removeAnimation(animation) {\n    var index = animations.indexOf(animation);\n    if (index > -1) animations.splice(index, 1);\n    }\n\n    function calcPageFillRadius(x, y) {\n    var l = Math.max(x - 0, cW - x);\n    var h = Math.max(y - 0, cH - y);\n    return Math.sqrt(Math.pow(l, 2) + Math.pow(h, 2));\n    }\n\n    function addClickListeners() {\n    document.addEventListener(\"touchstart\", handleEvent);\n    document.addEventListener(\"mousedown\", handleEvent);\n    };\n\n    function handleEvent(e) {\n        if (e.touches) { \n        e.preventDefault();\n        e = e.touches[0];\n        }\n        var currentColor = colorPicker.current();\n        var nextColor = colorPicker.next();\n        var targetR = calcPageFillRadius(e.pageX, e.pageY);\n        var rippleSize = Math.min(200, (cW * .4));\n        var minCoverDuration = 750;\n        \n        var pageFill = new Circle({\n        x: e.pageX,\n        y: e.pageY,\n        r: 0,\n        fill: nextColor\n        });\n        var fillAnimation = anime({\n        targets: pageFill,\n        r: targetR,\n        duration:  Math.max(targetR / 2 , minCoverDuration ),\n        easing: \"easeOutQuart\",\n        complete: function(){\n            bgColor = pageFill.fill;\n            removeAnimation(fillAnimation);\n        }\n        });\n        \n        var ripple = new Circle({\n        x: e.pageX,\n        y: e.pageY,\n        r: 0,\n        fill: currentColor,\n        stroke: {\n            width: 3,\n            color: currentColor\n        },\n        opacity: 1\n        });\n        var rippleAnimation = anime({\n        targets: ripple,\n        r: rippleSize,\n        opacity: 0,\n        easing: \"easeOutExpo\",\n        duration: 900,\n        complete: removeAnimation\n        });\n        \n        var particles = [];\n        for (var i=0; i<32; i++) {\n        var particle = new Circle({\n            x: e.pageX,\n            y: e.pageY,\n            fill: currentColor,\n            r: anime.random(24, 48)\n        })\n        particles.push(particle);\n        }\n        var particlesAnimation = anime({\n        targets: particles,\n        x: function(particle){\n            return particle.x + anime.random(rippleSize, -rippleSize);\n        },\n        y: function(particle){\n            return particle.y + anime.random(rippleSize * 1.15, -rippleSize * 1.15);\n        },\n        r: 0,\n        easing: \"easeOutExpo\",\n        duration: anime.random(1000,1300),\n        complete: removeAnimation\n        });\n        animations.push(fillAnimation, rippleAnimation, particlesAnimation);\n    }\n\n    function extend(a, b){\n    for(var key in b) {\n        if(b.hasOwnProperty(key)) {\n        a[key] = b[key];\n        }\n    }\n    return a;\n    }\n\n    var Circle = function(opts) {\n    extend(this, opts);\n    }\n\n    Circle.prototype.draw = function() {\n    ctx.globalAlpha = this.opacity || 1;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI, false);\n    if (this.stroke) {\n        ctx.strokeStyle = this.stroke.color;\n        ctx.lineWidth = this.stroke.width;\n        ctx.stroke();\n    }\n    if (this.fill) {\n        ctx.fillStyle = this.fill;\n        ctx.fill();\n    }\n    ctx.closePath();\n    ctx.globalAlpha = 1;\n    }\n\n    var animate = anime({\n    duration: Infinity,\n    update: function() {\n        ctx.fillStyle = bgColor;\n        ctx.fillRect(0, 0, cW, cH);\n        animations.forEach(function(anim) {\n        anim.animatables.forEach(function(animatable) {\n            animatable.target.draw();\n        });\n        });\n    }\n    });\n\n    var resizeCanvas = function() {\n    cW = window.innerWidth;\n    cH = window.innerHeight;\n    c.width = cW * devicePixelRatio;\n    c.height = cH * devicePixelRatio;\n    ctx.scale(devicePixelRatio, devicePixelRatio);\n    };\n\n    (function init() {\n    resizeCanvas();\n    if (window.CP) {\n        // CodePen's loop detection was causin' problems\n        // and I have no idea why, so...\n        window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT = 6000; \n    }\n    window.addEventListener(\"resize\", resizeCanvas);\n    addClickListeners();\n    if (!!window.location.pathname.match(/fullcpgrid/)) {\n        startFauxClicking();\n    }\n    handleInactiveUser();\n    })();\n\n    function handleInactiveUser() {\n    var inactive = setTimeout(function(){\n        fauxClick(cW/2, cH/2);\n    }, 2000);\n    \n    function clearInactiveTimeout() {\n        clearTimeout(inactive);\n        document.removeEventListener(\"mousedown\", clearInactiveTimeout);\n        document.removeEventListener(\"touchstart\", clearInactiveTimeout);\n    }\n    \n    document.addEventListener(\"mousedown\", clearInactiveTimeout);\n    document.addEventListener(\"touchstart\", clearInactiveTimeout);\n    }\n\n    function startFauxClicking() {\n    setTimeout(function(){\n        fauxClick(anime.random( cW * .2, cW * .8), anime.random(cH * .2, cH * .8));\n        startFauxClicking();\n    }, anime.random(200, 900));\n    }\n\n    function fauxClick(x, y) {\n    var fauxClick = new Event(\"mousedown\");\n    fauxClick.pageX = x;\n    fauxClick.pageY = y;\n    document.dispatchEvent(fauxClick);\n    }\n    }\n\n export default  explosiveClick;"]},"metadata":{},"sourceType":"module"}