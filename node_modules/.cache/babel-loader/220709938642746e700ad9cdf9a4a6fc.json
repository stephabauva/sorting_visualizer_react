{"ast":null,"code":"function explosiveClic() {\n  var c = document.getElementById(\"c\");\n  var ctx = c.getContext(\"2d\");\n  var cH;\n  var cW;\n  var bgColor = \"#FF6138\";\n  var animations = [];\n  var circles = [];\n\n  var colorPicker = function () {\n    var colors = [\"#FF6138\", \"#FFBE53\", \"#2980B9\", \"#282741\"];\n    var index = 0;\n\n    function next() {\n      index = index++ < colors.length - 1 ? index : 0;\n      return colors[index];\n    }\n\n    function current() {\n      return colors[index];\n    }\n\n    return {\n      next: next,\n      current: current\n    };\n  }();\n\n  function removeAnimation(animation) {\n    var index = animations.indexOf(animation);\n    if (index > -1) animations.splice(index, 1);\n  }\n\n  function calcPageFillRadius(x, y) {\n    var l = Math.max(x - 0, cW - x);\n    var h = Math.max(y - 0, cH - y);\n    return Math.sqrt(Math.pow(l, 2) + Math.pow(h, 2));\n  }\n\n  function addClickListeners() {\n    document.addEventListener(\"touchstart\", handleEvent);\n    document.addEventListener(\"mousedown\", handleEvent);\n  }\n\n  ;\n\n  function handleEvent(e) {\n    if (e.touches) {\n      e.preventDefault();\n      e = e.touches[0];\n    }\n\n    var currentColor = colorPicker.current();\n    var nextColor = colorPicker.next();\n    var targetR = calcPageFillRadius(e.pageX, e.pageY);\n    var rippleSize = Math.min(200, cW * .4);\n    var minCoverDuration = 750;\n    var pageFill = new Circle({\n      x: e.pageX,\n      y: e.pageY,\n      r: 0,\n      fill: nextColor\n    });\n    var fillAnimation = anime({\n      targets: pageFill,\n      r: targetR,\n      duration: Math.max(targetR / 2, minCoverDuration),\n      easing: \"easeOutQuart\",\n      complete: function () {\n        bgColor = pageFill.fill;\n        removeAnimation(fillAnimation);\n      }\n    });\n    var ripple = new Circle({\n      x: e.pageX,\n      y: e.pageY,\n      r: 0,\n      fill: currentColor,\n      stroke: {\n        width: 3,\n        color: currentColor\n      },\n      opacity: 1\n    });\n    var rippleAnimation = anime({\n      targets: ripple,\n      r: rippleSize,\n      opacity: 0,\n      easing: \"easeOutExpo\",\n      duration: 900,\n      complete: removeAnimation\n    });\n    var particles = [];\n\n    for (var i = 0; i < 32; i++) {\n      var particle = new Circle({\n        x: e.pageX,\n        y: e.pageY,\n        fill: currentColor,\n        r: anime.random(24, 48)\n      });\n      particles.push(particle);\n    }\n\n    var particlesAnimation = anime({\n      targets: particles,\n      x: function (particle) {\n        return particle.x + anime.random(rippleSize, -rippleSize);\n      },\n      y: function (particle) {\n        return particle.y + anime.random(rippleSize * 1.15, -rippleSize * 1.15);\n      },\n      r: 0,\n      easing: \"easeOutExpo\",\n      duration: anime.random(1000, 1300),\n      complete: removeAnimation\n    });\n    animations.push(fillAnimation, rippleAnimation, particlesAnimation);\n  }\n\n  function extend(a, b) {\n    for (var key in b) {\n      if (b.hasOwnProperty(key)) {\n        a[key] = b[key];\n      }\n    }\n\n    return a;\n  }\n\n  var Circle = function (opts) {\n    extend(this, opts);\n  };\n\n  Circle.prototype.draw = function () {\n    ctx.globalAlpha = this.opacity || 1;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI, false);\n\n    if (this.stroke) {\n      ctx.strokeStyle = this.stroke.color;\n      ctx.lineWidth = this.stroke.width;\n      ctx.stroke();\n    }\n\n    if (this.fill) {\n      ctx.fillStyle = this.fill;\n      ctx.fill();\n    }\n\n    ctx.closePath();\n    ctx.globalAlpha = 1;\n  };\n\n  var animate = anime({\n    duration: Infinity,\n    update: function () {\n      ctx.fillStyle = bgColor;\n      ctx.fillRect(0, 0, cW, cH);\n      animations.forEach(function (anim) {\n        anim.animatables.forEach(function (animatable) {\n          animatable.target.draw();\n        });\n      });\n    }\n  });\n\n  var resizeCanvas = function () {\n    cW = window.innerWidth;\n    cH = window.innerHeight;\n    c.width = cW * devicePixelRatio;\n    c.height = cH * devicePixelRatio;\n    ctx.scale(devicePixelRatio, devicePixelRatio);\n  };\n\n  (function init() {\n    resizeCanvas();\n\n    if (window.CP) {\n      // CodePen's loop detection was causin' problems\n      // and I have no idea why, so...\n      window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT = 6000;\n    }\n\n    window.addEventListener(\"resize\", resizeCanvas);\n    addClickListeners();\n\n    if (!!window.location.pathname.match(/fullcpgrid/)) {\n      startFauxClicking();\n    }\n\n    handleInactiveUser();\n  })();\n\n  function handleInactiveUser() {\n    var inactive = setTimeout(function () {\n      fauxClick(cW / 2, cH / 2);\n    }, 2000);\n\n    function clearInactiveTimeout() {\n      clearTimeout(inactive);\n      document.removeEventListener(\"mousedown\", clearInactiveTimeout);\n      document.removeEventListener(\"touchstart\", clearInactiveTimeout);\n    }\n\n    document.addEventListener(\"mousedown\", clearInactiveTimeout);\n    document.addEventListener(\"touchstart\", clearInactiveTimeout);\n  }\n\n  function startFauxClicking() {\n    setTimeout(function () {\n      fauxClick(anime.random(cW * .2, cW * .8), anime.random(cH * .2, cH * .8));\n      startFauxClicking();\n    }, anime.random(200, 900));\n  }\n\n  function fauxClick(x, y) {\n    var fauxClick = new Event(\"mousedown\");\n    fauxClick.pageX = x;\n    fauxClick.pageY = y;\n    document.dispatchEvent(fauxClick);\n  }\n}\n\nexport default explosiveClic;","map":{"version":3,"sources":["/Users/urdoom/sorting_visualizer_react/src/sortingVisualizer/ExplosiveClic.js"],"names":["explosiveClic","c","document","getElementById","ctx","getContext","cH","cW","bgColor","animations","circles","colorPicker","colors","index","next","length","current","removeAnimation","animation","indexOf","splice","calcPageFillRadius","x","y","l","Math","max","h","sqrt","pow","addClickListeners","addEventListener","handleEvent","e","touches","preventDefault","currentColor","nextColor","targetR","pageX","pageY","rippleSize","min","minCoverDuration","pageFill","Circle","r","fill","fillAnimation","anime","targets","duration","easing","complete","ripple","stroke","width","color","opacity","rippleAnimation","particles","i","particle","random","push","particlesAnimation","extend","a","b","key","hasOwnProperty","opts","prototype","draw","globalAlpha","beginPath","arc","PI","strokeStyle","lineWidth","fillStyle","closePath","animate","Infinity","update","fillRect","forEach","anim","animatables","animatable","target","resizeCanvas","window","innerWidth","innerHeight","devicePixelRatio","height","scale","init","CP","PenTimer","MAX_TIME_IN_LOOP_WO_EXIT","location","pathname","match","startFauxClicking","handleInactiveUser","inactive","setTimeout","fauxClick","clearInactiveTimeout","clearTimeout","removeEventListener","Event","dispatchEvent"],"mappings":"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","sourcesContent":["function explosiveClic() {\n    var c = document.getElementById(\"c\");\nvar ctx = c.getContext(\"2d\");\nvar cH;\nvar cW;\nvar bgColor = \"#FF6138\";\nvar animations = [];\nvar circles = [];\n\nvar colorPicker = (function() {\n  var colors = [\"#FF6138\", \"#FFBE53\", \"#2980B9\", \"#282741\"];\n  var index = 0;\n  function next() {\n    index = index++ < colors.length-1 ? index : 0;\n    return colors[index];\n  }\n  function current() {\n    return colors[index]\n  }\n  return {\n    next: next,\n    current: current\n  }\n})();\n\nfunction removeAnimation(animation) {\n  var index = animations.indexOf(animation);\n  if (index > -1) animations.splice(index, 1);\n}\n\nfunction calcPageFillRadius(x, y) {\n  var l = Math.max(x - 0, cW - x);\n  var h = Math.max(y - 0, cH - y);\n  return Math.sqrt(Math.pow(l, 2) + Math.pow(h, 2));\n}\n\nfunction addClickListeners() {\n  document.addEventListener(\"touchstart\", handleEvent);\n  document.addEventListener(\"mousedown\", handleEvent);\n};\n\nfunction handleEvent(e) {\n    if (e.touches) { \n      e.preventDefault();\n      e = e.touches[0];\n    }\n    var currentColor = colorPicker.current();\n    var nextColor = colorPicker.next();\n    var targetR = calcPageFillRadius(e.pageX, e.pageY);\n    var rippleSize = Math.min(200, (cW * .4));\n    var minCoverDuration = 750;\n    \n    var pageFill = new Circle({\n      x: e.pageX,\n      y: e.pageY,\n      r: 0,\n      fill: nextColor\n    });\n    var fillAnimation = anime({\n      targets: pageFill,\n      r: targetR,\n      duration:  Math.max(targetR / 2 , minCoverDuration ),\n      easing: \"easeOutQuart\",\n      complete: function(){\n        bgColor = pageFill.fill;\n        removeAnimation(fillAnimation);\n      }\n    });\n    \n    var ripple = new Circle({\n      x: e.pageX,\n      y: e.pageY,\n      r: 0,\n      fill: currentColor,\n      stroke: {\n        width: 3,\n        color: currentColor\n      },\n      opacity: 1\n    });\n    var rippleAnimation = anime({\n      targets: ripple,\n      r: rippleSize,\n      opacity: 0,\n      easing: \"easeOutExpo\",\n      duration: 900,\n      complete: removeAnimation\n    });\n    \n    var particles = [];\n    for (var i=0; i<32; i++) {\n      var particle = new Circle({\n        x: e.pageX,\n        y: e.pageY,\n        fill: currentColor,\n        r: anime.random(24, 48)\n      })\n      particles.push(particle);\n    }\n    var particlesAnimation = anime({\n      targets: particles,\n      x: function(particle){\n        return particle.x + anime.random(rippleSize, -rippleSize);\n      },\n      y: function(particle){\n        return particle.y + anime.random(rippleSize * 1.15, -rippleSize * 1.15);\n      },\n      r: 0,\n      easing: \"easeOutExpo\",\n      duration: anime.random(1000,1300),\n      complete: removeAnimation\n    });\n    animations.push(fillAnimation, rippleAnimation, particlesAnimation);\n}\n\nfunction extend(a, b){\n  for(var key in b) {\n    if(b.hasOwnProperty(key)) {\n      a[key] = b[key];\n    }\n  }\n  return a;\n}\n\nvar Circle = function(opts) {\n  extend(this, opts);\n}\n\nCircle.prototype.draw = function() {\n  ctx.globalAlpha = this.opacity || 1;\n  ctx.beginPath();\n  ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI, false);\n  if (this.stroke) {\n    ctx.strokeStyle = this.stroke.color;\n    ctx.lineWidth = this.stroke.width;\n    ctx.stroke();\n  }\n  if (this.fill) {\n    ctx.fillStyle = this.fill;\n    ctx.fill();\n  }\n  ctx.closePath();\n  ctx.globalAlpha = 1;\n}\n\nvar animate = anime({\n  duration: Infinity,\n  update: function() {\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, cW, cH);\n    animations.forEach(function(anim) {\n      anim.animatables.forEach(function(animatable) {\n        animatable.target.draw();\n      });\n    });\n  }\n});\n\nvar resizeCanvas = function() {\n  cW = window.innerWidth;\n  cH = window.innerHeight;\n  c.width = cW * devicePixelRatio;\n  c.height = cH * devicePixelRatio;\n  ctx.scale(devicePixelRatio, devicePixelRatio);\n};\n\n(function init() {\n  resizeCanvas();\n  if (window.CP) {\n    // CodePen's loop detection was causin' problems\n    // and I have no idea why, so...\n    window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT = 6000; \n  }\n  window.addEventListener(\"resize\", resizeCanvas);\n  addClickListeners();\n  if (!!window.location.pathname.match(/fullcpgrid/)) {\n    startFauxClicking();\n  }\n  handleInactiveUser();\n})();\n\nfunction handleInactiveUser() {\n  var inactive = setTimeout(function(){\n    fauxClick(cW/2, cH/2);\n  }, 2000);\n  \n  function clearInactiveTimeout() {\n    clearTimeout(inactive);\n    document.removeEventListener(\"mousedown\", clearInactiveTimeout);\n    document.removeEventListener(\"touchstart\", clearInactiveTimeout);\n  }\n  \n  document.addEventListener(\"mousedown\", clearInactiveTimeout);\n  document.addEventListener(\"touchstart\", clearInactiveTimeout);\n}\n\nfunction startFauxClicking() {\n  setTimeout(function(){\n    fauxClick(anime.random( cW * .2, cW * .8), anime.random(cH * .2, cH * .8));\n    startFauxClicking();\n  }, anime.random(200, 900));\n}\n\nfunction fauxClick(x, y) {\n  var fauxClick = new Event(\"mousedown\");\n  fauxClick.pageX = x;\n  fauxClick.pageY = y;\n  document.dispatchEvent(fauxClick);\n}\n}\n\nexport default explosiveClic;"]},"metadata":{},"sourceType":"module"}